(function(e){var t={init:function(n){e.fn.highlightNavigation.self=this;self.wrapper=e('<div class="highlight-navigation-container"/>');e.fn.highlightNavigation.self.after(self.wrapper).detach().appendTo(self.wrapper);e.fn.highlightNavigation.elemObjTag=e.fn.highlightNavigation.self.prop("tagName");settings=e.extend({},e.fn.highlightNavigation.defaults,n);self.selectedItem={};if(settings.keyboardNav){e(document).on("keydown.highlightNav",e.proxy(t.keyPress,self))}e(document).on("click.highlightNav",e.proxy(t.itemClick,self));e(document).on("touchstart.highlightNav",e.proxy(t.itemClick,self));t.selectFirst()},selectFirst:function(){var n=t.getAllItems();if(n.length){e.fn.highlightNavigation.selectedItem=n.eq(0).addClass("selected");settings.onSelect();settings.selectFirst()}},selectNext:function(n){var r={},i=t.getSelectedItem(),s=t.getAllItems();if(typeof i==="undefined"){e.error("Ensure that your elements are correctly set up. Relationship must be PARENT > CHILD. Othewise, ensure any extraneous children are skipped.")}if(n===-1&&(e.fn.highlightNavigation.elemObjTag==="NAV"&&i.prevAll("a").length||typeof i.prev().prop("tagName")!=="undefined")){if(e.fn.highlightNavigation.elemObjTag==="NAV"){r=i.prevAll("a:first")}else if(e.fn.highlightNavigation.elemObjTag==="DL"){r=i.prevAll("dt:first")}else{r=i.prev()}r.addClass("selected")}else if(n===1&&(e.fn.highlightNavigation.elemObjTag==="NAV"&&i.nextAll("a").length||typeof i.next().prop("tagName")!=="undefined")){switch(e.fn.highlightNavigation.elemObjTag){case"NAV":r=i.nextAll("a:first");break;case"UL":r=i.nextAll("li:first");break;case"OL":r=i.nextAll("li:first");break;case"DL":r=i.nextAll("dt:first");break;default:r=i.next()}r.addClass("selected")}if(!e.isEmptyObject(r)&&r.length){i.removeClass("selected");e.fn.highlightNavigation.selectedItem=r;settings.onSelect();settings.selectNext()}},keyPress:function(n){var r="",i="";n.preventDefault();if(window.event){r=window.event.keyCode}else if(n){r=n.which}i=r==settings.navPrevItemKey?-1:r==settings.navNextItemKey?1:0;if(i!=0){t.selectNext(i)}if(r==settings.navActionKey){settings.actionKeyPress()}e.fn.highlightNavigation.keyCode=r;settings.keyPress()},itemClick:function(n,r){var i=this,s=n?n:event,o=s.srcElement?s.srcElement:s.target,u=t.getAllItems(),a={},f=t.getSelectedItem();if(s.which===1){s.preventDefault();if(e("li, tr").has(e(o)).length){a=e("li, tr").has(e(o))}else{a=e(o)}if(a.parent().prop("tagName")!=="THEAD"){u.removeClass("selected");a.addClass("selected");e.fn.highlightNavigation.selectedItem=a;settings.itemClick()}}},getAllItems:function(){switch(e.fn.highlightNavigation.elemObjTag){case"TABLE":return e.fn.highlightNavigation.self.find("tbody tr");break;case"UL":return e.fn.highlightNavigation.self.find("li");break;case"OL":return e.fn.highlightNavigation.self.find("li");break;case"NAV":return e.fn.highlightNavigation.self.find("a");break;case"DL":return e.fn.highlightNavigation.self.find("dt");break;case e.fn.highlightNavigation.elemObjTag.length:return e.fn.highlightNavigation.self.children();break;default:return false}settings.getAllItems()},getSelectedItem:function(){return e.fn.highlightNavigation.selectedItem},selectItem:function(n){var r=t.getAllItems(),i=e(r.get(n));r.removeClass("selected");i.addClass("selected");e.fn.highlightNavigation.selectedItem=i;settings.onSelect();return i},getKeyCode:function(){return e.fn.highlightNavigation.keyCode},destroy:function(){t.getSelectedItem().removeClass("selected");e(document).off(".highlightNav");e.fn.highlightNavigation.self.unwrap()}};e.fn.highlightNavigation=function(n){e.fn.highlightNavigation.defaults={navPrevItemKey:38,navNextItemKey:40,navActionKey:13,keyboardNav:true,selectFirst:function(){},selectNext:function(){},onSelect:function(){},keyPress:function(){},itemClick:function(){},getAllItems:function(){},selectItem:function(){},getKeyCode:function(){},actionKeyPress:function(){}};if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist in highlight-navigation")}}})(jQuery)
